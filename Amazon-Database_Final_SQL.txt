// Adam Almuhtaseb, Hanzla Bin Masood, Mayuren Suntherapandiyan, Gavin D Hatcher, Abdul Hadi Ahmad

// Version 1
// Create users table
CREATE TABLE Users (
    UserID INT PRIMARY KEY,
    FirstName VARCHAR(255),
    LastName VARCHAR(255),
    Birthdate DATE
);

// Create customers table and initialize values for it and include primary key to use for other tables
// Customer ratings: 1 (BAD), 2 (OKAY), 3 (GREAT)
CREATE TABLE Customers (
    CustomerID INT PRIMARY KEY,
    FOREIGN KEY (CustomerID) REFERENCES Users(UserID),
    CustomerPhone INT,
    CustomerEmail VARCHAR(255),
    CustomerAddress VARCHAR(255),
    CustomerRating INT
);

// Create sellers table
// Customer ratings: 1 (BAD), 2 (OKAY), 3 (GREAT)
CREATE TABLE Sellers (
    SellerID INT PRIMARY KEY,
    FOREIGN KEY (SellerID) REFERENCES Users(UserID),
    SellerPhone INT,
    SellerEmail VARCHAR(255),
    SellerAddress VARCHAR(255),
    SellerRating INT
);

// Create products table and initialize values for it including foreign keys to link to data from customers data
CREATE TABLE Products (
    ProductID INT PRIMARY KEY,
    SellerID INT,
    FOREIGN KEY (SellerID) REFERENCES Sellers(SellerID),
    ProductLocation VARCHAR(255),
    ProductName VARCHAR(255),
    ProductPrice DECIMAL,
    ProductCondition VARCHAR(255),
    ProductQuantity INT,
    ProductRating VARCHAR(255),
    ProductDescription VARCHAR(255)
);

// Insert data into users table
INSERT INTO Users (Userid, FirstName, LastName, Birthdate) VALUES
(1, 'John', 'Doe', TO_DATE('1990-05-15', 'YYYY-MM-DD'));
INSERT INTO Users (Userid, FirstName, LastName, Birthdate) VALUES
(2, 'Jane', 'Smith', TO_DATE('1985-08-20', 'YYYY-MM-DD'));
INSERT INTO Users (Userid, FirstName, LastName, Birthdate) VALUES
(3, 'Bob', 'Johnson', TO_DATE('1995-03-10', 'YYYY-MM-DD'));
INSERT INTO Users (Userid, FirstName, LastName, Birthdate) VALUES
(4, 'Adam', 'Peterson', TO_DATE('2004-05-07', 'YYYY-MM-DD'));
INSERT INTO Users (Userid, FirstName, LastName, Birthdate) VALUES
(5, 'Hanzla', 'Bin Masood', TO_DATE('1996-03-10', 'YYYY-MM-DD'));

// Insert data into customers table
INSERT INTO Customers (Customerid, CustomerPhone, CustomerEmail, CustomerAddress, CustomerRating) VALUES
(1, 1234567890, 'john.doe@email.com', '123 Main St, Cityville', 3);
INSERT INTO Customers (Customerid, CustomerPhone, CustomerEmail, CustomerAddress, CustomerRating) VALUES
(2, 9876543210, 'jane.smith@email.com', '456 Oak St, Townsville', 2);
INSERT INTO Customers (Customerid, CustomerPhone, CustomerEmail, CustomerAddress, CustomerRating) VALUES
(3, 5556667777, 'bob.johnson@email.com', '789 Pine St, Villagetown', 1);
INSERT INTO Customers (Customerid, CustomerPhone, CustomerEmail, CustomerAddress, CustomerRating) VALUES
(4, 6546058465, 'adam.peterson@email.com', '328 Oak Ave, Brookfield', 3);
INSERT INTO Customers (Customerid, CustomerPhone, CustomerEmail, CustomerAddress, CustomerRating) VALUES
(5, 8640654032, 'hanzla.binmasood@email.com', '5046 Great St, Oakville', 1);

// Insert data into sellers table
INSERT INTO Sellers (SellerID, SellerPhone, SellerEmail, SellerAddress, SellerRating) VALUES
(1, 1112223333, 'seller1@email.com', '789 Elm St, Countryside', 3);
INSERT INTO Sellers (SellerID, SellerPhone, SellerEmail, SellerAddress, SellerRating) VALUES
(2, 9998887777, 'seller2@email.com', '101 Maple St, Suburbia', 2);
INSERT INTO Sellers (SellerID, SellerPhone, SellerEmail, SellerAddress, SellerRating) VALUES
(3, 4445556666, 'seller3@email.com', '202 Birch St, Riverside', 1);

// Insert data into products table
INSERT INTO Products (ProductID, SellerID, ProductLocation, ProductName, ProductPrice, ProductCondition, ProductQuantity, ProductRating, ProductDescription) VALUES
(1, 1, 'Warehouse A', 'Laptop', 899.99, 'New', 10, 'GREAT', 'High-performance laptop for gaming and work');
INSERT INTO Products (ProductID, SellerID, ProductLocation, ProductName, ProductPrice, ProductCondition, ProductQuantity, ProductRating, ProductDescription) VALUES
(2, 2, 'Warehouse B', 'Smartphone', 499.99, 'Like New', 15, 'OKAY', 'Latest model with advanced features');
INSERT INTO Products (ProductID, SellerID, ProductLocation, ProductName, ProductPrice, ProductCondition, ProductQuantity, ProductRating, ProductDescription) VALUES
(3, 3, 'Warehouse C', 'Camera', 699.99, 'Used', 5, 'BAD', 'Entry-level digital camera with basic features');

// Version 2
// Create sales table and initalize values in it
CREATE TABLE Sales (
    SaleID INT PRIMARY KEY,
    CustomerID INT,
    SellerID INT,
    ProductID INT,
    Saledate DATE,
    Quantity INT,
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID),
    FOREIGN KEY (SellerID) REFERENCES Sellers(SellerID),
    FOREIGN KEY (ProductID) REFERENCES Products(ProductID)
);

// Insert data into the sales table
INSERT INTO Sales (SaleID, CustomerID, SellerID, ProductID, Saledate, Quantity) VALUES
(1, 1, 1, 1, TO_DATE('2023-01-15', 'YYYY-MM-DD'), 2);
INSERT INTO Sales (SaleID, CustomerID, SellerID, ProductID, Saledate, Quantity) VALUES
(2, 2, 2, 2, TO_DATE('2023-02-20', 'YYYY-MM-DD'), 1);
INSERT INTO Sales (SaleID, CustomerID, SellerID, ProductID, Saledate, Quantity) VALUES
(3, 3, 3, 3, TO_DATE('2023-03-10', 'YYYY-MM-DD'), 3);

// Version 3
// Create a sequence
CREATE SEQUENCE sale_id_sequence START WITH 1 INCREMENT BY 1;

// Use the sequence to insert data into the Sales table
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 3, 1, 3, TO_DATE('2023-01-20', 'YYYY-MM-DD'), 1);
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 2, 2, 2, TO_DATE('2018-05-19', 'YYYY-MM-DD'), 2);
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 1, 3, 1, TO_DATE('2020-03-15', 'YYYY-MM-DD'), 1);
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 2, 1, 3, TO_DATE('2009-07-31', 'YYYY-MM-DD'), 1);
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 3, 3, 2, TO_DATE('2010-01-20', 'YYYY-MM-DD'), 5);
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 4, 2, 1, TO_DATE('2014-06-10', 'YYYY-MM-DD'), 1);
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 2, 3, 2, TO_DATE('2016-01-20', 'YYYY-MM-DD'), 6);
INSERT INTO Sales (saleid, customerid, productid, sellerid, saledate, quantity) VALUES
    (sale_id_sequence.NEXTVAL, 1, 1, 1, TO_DATE('2008-03-30', 'YYYY-MM-DD'), 1);

// Create synonyms for the Customers, Products, Sellers, and Sales tables
// For the Customers table
CREATE SYNONYM Customers_Synonym FOR Customers;

// For the Products table
CREATE SYNONYM Products_Synonym FOR Products;

// For the Sellers table
CREATE SYNONYM Sellers_Synonym FOR Sellers;

// For the Sales table
CREATE SYNONYM Sales_Synonym FOR Sales;


// Create a Sales History Table
CREATE TABLE SalesHistory AS
SELECT *
FROM (
    SELECT *
    FROM Sales
    ORDER BY saledate DESC
) WHERE ROWNUM <= 3;
// Retrieve the last 3 rows

// To retrieve the first 3 rows, you can use "ORDER BY sale_date ASC" instead.

